<div class="my-container" id="style-1">
  <div style="display: flex;">
    <span class="backBtn" (click)="back()"
      ><i class="pi pi-arrow-left"></i>&nbsp;ย้อนกลับ</span
    >
    <span class="title">{{ session?.title }}</span>
  </div>
  <div *ngIf="loading" class="loading-container">
    <div style="align-self: center; padding-top: 1em;">
      <div style="display: flex; justify-content: center;">
        <p-progressSpinner></p-progressSpinner>
      </div>
      <p style="text-align:center;">
        Loading...
      </p>
    </div>
  </div>

  <p-table
    [columns]="(liveSessionTableRaw$ | async | async)?.headers"
    [value]="(liveSessionTableRaw$ | async | async)?.bodies"
  >
    <ng-template pTemplate="caption">
      <div class="caption-container">
        <div>
          <button
            class="ui-button-danger"
            type="button"
            pButton
            (click)="endSession()"
            label="End Live"
          ></button>
        </div>
      </div>
    </ng-template>
    <ng-template pTemplate="header" let-columns>
      <tr>
        <th *ngFor="let col of columns; index as i">
          <span *ngIf="col.field == 'code'">{{ col.header }}</span>
          <button *ngIf="col.field != 'code'" (click)="onSendQuestion(i - 1)">
            <span *ngIf="(liveSession$ | async)?.active_question_idx == i - 1">
              alive
            </span>
            {{ col.header }}
          </button>
        </th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-rowData let-columns="columns">
      <tr>
        <td *ngFor="let col of columns">
          {{ rowData[col.field] }}
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>
